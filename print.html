<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>audioware</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/css/mdbook-admonish.css">
        <link rel="stylesheet" href="./theme/css/mdbook-admonish-custom.css">
        <link rel="stylesheet" href="./theme/css/mdbook-admonish-styling.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="GETTING-STARTED.html"><strong aria-hidden="true">1.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="CONCEPT.html"><strong aria-hidden="true">2.</strong> Concept</a></li><li class="chapter-item expanded "><a href="HOWTO.html"><strong aria-hidden="true">3.</strong> How to use?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="MANIFEST.html"><strong aria-hidden="true">3.1.</strong> Manifest</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="SECTIONS.html"><strong aria-hidden="true">3.1.1.</strong> Sections</a></li><li class="chapter-item expanded "><a href="SETTINGS.html"><strong aria-hidden="true">3.1.2.</strong> Static Settings</a></li><li class="chapter-item expanded "><a href="ROUTING.html"><strong aria-hidden="true">3.1.3.</strong> Routing</a></li></ol></li><li class="chapter-item expanded "><a href="API.html"><strong aria-hidden="true">3.2.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="GUIDE.html"><strong aria-hidden="true">3.2.1.</strong> Developer guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="AUDIO_SYSTEM.html"><strong aria-hidden="true">3.2.1.1.</strong> AudioSystem</a></li><li class="chapter-item expanded "><a href="AUDIO_SYSTEM_EXT.html"><strong aria-hidden="true">3.2.1.2.</strong> AudioSystemExt</a></li><li class="chapter-item expanded "><a href="AUDIO_SETTINGS_EXT.html"><strong aria-hidden="true">3.2.1.3.</strong> Dynamic Settings</a></li><li class="chapter-item expanded "><a href="DYNAMIC_SOUNDS.html"><strong aria-hidden="true">3.2.1.4.</strong> Dynamic Sounds</a></li><li class="chapter-item expanded "><a href="PARAMETERS.html"><strong aria-hidden="true">3.2.1.5.</strong> Parameters</a></li><li class="chapter-item expanded "><a href="SPATIALIZATION.html"><strong aria-hidden="true">3.2.1.6.</strong> Spatialization</a></li><li class="chapter-item expanded "><a href="DYNAMIC_EMITTERS.html"><strong aria-hidden="true">3.2.1.7.</strong> Dynamic Emitters</a></li><li class="chapter-item expanded "><a href="SCENE_DIALOG_LINES.html"><strong aria-hidden="true">3.2.1.8.</strong> Scene Dialog Lines</a></li><li class="chapter-item expanded "><a href="NATIVE_INTEGRATION.html"><strong aria-hidden="true">3.2.1.9.</strong> Native Audio Integration</a></li></ol></li><li class="chapter-item expanded "><a href="DOCS.html"><strong aria-hidden="true">3.2.2.</strong> Internal docs</a></li></ol></li><li class="chapter-item expanded "><a href="INTEGRATION.html"><strong aria-hidden="true">3.3.</strong> Integration</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">audioware</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cyb3rpsych0s1s/audioware" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="getting-started"><a class="header" href="#getting-started">Getting started</a></h1>
<p><img src="./assets/cover.webp" alt="Cover image" /></p>
<p>Welcome to audioware book !</p>
<p>Audioware is a native plugin to play custom audios in Cyberpunk 2077, <em>without</em> REDmod.</p>
<p>It's built with emphasis on getting you going fast, providing sensible defaults and seamless integration with the game while not compromising on performances.</p>
<p>Here's the simplest way to test it out in under 5min.</p>
<h2 id="-install"><a class="header" href="#-install">‚¨áÔ∏è Install</a></h2>
<ul>
<li>grab <a href="https://github.com/cyb3rpsych0s1s/audioware/releases/latest">Audioware latest release</a> and unzip it in root game folder.</li>
<li>make sure you have both <a href="https://github.com/psiberx/cp2077-codeware/releases">Codeware 1.11.1+</a> and <a href="https://github.com/psiberx/cp2077-tweak-xl/releases">TweakXL 1.10.2+</a> installed too.</li>
</ul>
<h2 id="-define-audios"><a class="header" href="#-define-audios">üìÑ Define audios</a></h2>
<p>Create a folder e.g. <code>MyMod</code> for your mod, located in either depot:</p>
<ul>
<li>under <code>mods\MyMod</code></li>
<li>or <code>r6\audioware\MyMod</code>
but not both !</li>
</ul>
<p>Create a manifest e.g. <code>audios.yml</code>.</p>
<p>In its simplest form, here's how it looks like:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">version: 1.0.0
sfx:
  my_custom_audio: some.mp3 # accepts most common formats like .wav / .ogg / .mp3 / .flac
</code></pre>
</div>
<h2 id="-use-in-game"><a class="header" href="#-use-in-game">‚ô¨‚ãÜ.Àö Use in-game</a></h2>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">GameInstance.GetAudioSystem(game).Play(n"my_custom_audio");
</code></pre>
</div>
<hr />
<p>If you want to dive in directly, head over to <a href="./HOWTO.html">How to use?</a> for more.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concept"><a class="header" href="#concept">Concept</a></h1>
<p>Out-of-the-box, Cyberpunk 2077's <em>vanilla</em><sup class="footnote-reference"><a href="#1">1</a></sup> audio engine is built on top of <a href="https://www.audiokinetic.com/en/wwise/overview/">Audiokinetic's WWise</a> which is a professional-grade audio software and tools suite.</p>
<p>Audioware <em>does not make any use of it</em> and it has <em>almost</em> <strong>no</strong> control over it.</p>
<p>Here's how Cyberpunk 2077 is designed, in an overly simplified way.</p>
<p><img src="./assets/without-audioware.png" alt="Cyberpunk 2077 audio system" /></p>
<div id="admonition-why-not-directly-hook-wwise" class="admonition admonish-question" role="note" aria-labelledby="admonition-why-not-directly-hook-wwise-title">
<div class="admonition-title">
<div id="admonition-why-not-directly-hook-wwise-title">
<p>Why not directly hook WWise?</p>
</div>
<a class="admonition-anchor-link" href="CONCEPT.html#admonition-why-not-directly-hook-wwise"></a>
</div>
<div>
<p>When I initially started working on Audioware I also was tempted to hook everything from Audiokinetic to allow adding custom audio to the game. At first.</p>
</div>
</div>
<p>But the reality is that, when you choose this path on one side you get native<sup class="footnote-reference"><a href="#2">2</a></sup> integration which is great, but on the other you then need to do <span style="color: hotpink">everything</span> as both <a href="https://www.audiokinetic.com/en/library/edge/?source=SDK&amp;id=index.html">WWise</a> and the game does. Not even mentioning that you actually will have to learn how CDPR works <span style="color: hotpink">with</span> WWise, which is <a href="https://github.com/vgmstream/vgmstream/issues/778">not always standard</a>.</p>
<p>Professional <em>all-in-one</em> softwares like Audiokinetic can be dauting to use when unfamiliar and quickly become an <span style="color: hotpink">entry-skills barrier<sup class="footnote-reference"><a href="#3">3</a></sup></span> for newcomers who would simply like to add sounds, play around with them, have fun and come up with an interesting mod.</p>
<div id="admonition-what-about-redmod" class="admonition admonish-question" role="note" aria-labelledby="admonition-what-about-redmod-title">
<div class="admonition-title">
<div id="admonition-what-about-redmod-title">
<p>What about REDmod?</p>
</div>
<a class="admonition-anchor-link" href="CONCEPT.html#admonition-what-about-redmod"></a>
</div>
<div>
<p>I really enjoyed <a href="https://wiki.redmodding.org/cyberpunk-2077-modding/for-mod-creators-theory/modding-tools/redmod/audio-modding">REDmod</a> in the beginning but always felt frustrated after a while to not be able to alter sounds dynamically.</p>
</div>
</div>
<p>The <a href="https://wiki.redmodding.org/cyberpunk-2077-modding/for-mod-creators-theory/modding-tools/redmod/audio-modding#parameters">audio parameters</a> it exposes are very cool, but as far as I remember you can't seamlessly switch from one to another, and if you want multiple parameters per sound you basically have to duplicate them as many times.</p>
<p>Last but not least, I regularly got players complaining about it becoming overly slow when (too?) many mods use it, and it does not seem particularly appreciated among player base.</p>
<div id="admonition-then-how" class="admonition admonish-question" role="note" aria-labelledby="admonition-then-how-title">
<div class="admonition-title">
<div id="admonition-then-how-title">
<p>Then, how?</p>
</div>
<a class="admonition-anchor-link" href="CONCEPT.html#admonition-then-how"></a>
</div>
<div>
<p>What I always wanted <em>right from start</em> is a tool that can get me going <span style="color: hotpink">in under 15min</span>.</p>
<p>I wanted something to be able to play <span style="color: hotpink">easily defined</span> sounds with <span style="color: hotpink">parameters</span> and <span style="color: hotpink">audio effects</span>.</p>
<p>Something <span style="color: #f3d772">Simple</span>. <span style="color: #f3d772">Easy</span>. yet <span style="color: #f3d772">Customizable</span> and <span style="color: #f3d772">Fast</span>.</p>
</div>
</div>
<p>And this how Audioware was initially born as a simple proof-of-concept in <a href="https://github.com/cyb3rpsych0s1s/4ddicted">4ddicted</a>, another mod of mine. Until other modders started to notice that it worked pretty well and asked me to turn into a fully integrated native plugin.</p>
<p>Audioware actually uses a second <span style="color: hotpink">alternate audio engine</span> named <a href="https://docs.rs/kira/latest/kira" title="kira crate">kira</a>, <em>alongside</em> vanilla one.</p>
<p>It then does integrate seamlessly, creating the illusion that there's only one and unique audio environment.</p>
<p>Here is, once again in an overly simplified way, how it works:</p>
<p><img src="./assets/with-audioware.png" alt="Audioware plugin" /></p>
<hr />
<p>But let's process to <a href="./HOWTO.html">next chapter</a> to see how it can be used, and what it can currently do for you.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><em>vanilla</em> describes everything belonging to the original game, as opposed to further modifications or <em>mods</em> made by the community.</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p><em>natively</em> in the sense that tool, assets and game itself speaks the exact same language leading to seamless integration.</p>
</div>
<div class="footnote-definition" id="3"><sup class="footnote-definition-label">3</sup>
<p>reserved to a handful of professional.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-use"><a class="header" href="#how-to-use">How to use?</a></h1>
<p>In <a href="./GETTING-STARTED.html">Getting started</a> we already saw that adding custom sounds for Cyberpunk 2077 with Audioware literally boils down to 2 steps:</p>
<ol>
<li>define your audios in <a href="./MANIFEST.html">Manifest</a>(s): see how to further describe your audio assets along optional settings and metadata.</li>
<li>play them in-game with scripting <a href="./API.html">API</a>: using <a href="https://wiki.redmodding.org/cyber-engine-tweaks">CET</a> or <a href="https://wiki.redmodding.org/redscript">Redscript</a> to control how / when they get played, stopped, switched, etc.</li>
</ol>
<p>All audios have some automations built-in, that you can read about in <a href="./INTEGRATION.html">Integration</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="manifest"><a class="header" href="#manifest">Manifest</a></h1>
<p>A manifest is a simple <code>YAML</code><sup class="footnote-reference"><a href="#YAML">1</a></sup> file to describe your sounds.
Audioware then use them to build sounds banks on game startup.</p>
<p>Let's take a closer look at a Manifest's anatomy.</p>
<h2 id="anatomy"><a class="header" href="#anatomy">Anatomy</a></h2>
<p>A manifest is a <code>.yml</code><sup class="footnote-reference"><a href="#YAML">1</a></sup> file located in a folder named after your mod inside one of 2 depots.</p>
<p>It expects a <code>version</code> and sections like <code>sfx</code>, <code>onos</code>, <code>voices</code> or <code>music</code>.</p>
<p>It must be defined:</p>
<ul>
<li>in a folder named after your mod (e.g. <code>mods\MyMod</code>) itself located inside any valid depot (<code>mods</code> or <code>r6\audioware</code>),</li>
<li>alongside audio files: files can be located in sub-folders, at your discretion.</li>
</ul>
<p>Each section contains one or multiple <code>audio ID</code>(s) which points to an <code>audio file path</code>.</p>
<p>When using a simple audio file, you can write it inline.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">version: 1.0.0
# ‚¨áÔ∏è section
sfx:
# ‚¨áÔ∏è audio ID      ‚¨áÔ∏è audio file path
  my_custom_audio: some.mp3
</code></pre>
</div>
<p>But you can also write nested properties for settings:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">version: 1.0.0
sfx:
  my_custom_audio:
    file: some.mp3 
    settings:
      volume: 4.0 # 4 times louder!
</code></pre>
</div>
<p>All audio accepts multiple optional <a href="./SETTINGS.html">settings</a>.</p>
<h2 id="supported-audio-formats"><a class="header" href="#supported-audio-formats">Supported audio formats</a></h2>
<p>Audioware supports the following formats:</p>
<ul>
<li>.wav</li>
<li>.ogg</li>
<li>.mp3</li>
<li>.flac</li>
</ul>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-tip"></a>
</div>
<div>
<p>Generally speaking, Cyberpunk 2077 vanilla audio uses 48kHz / 16 bit PCM.</p>
<details><summary>analyze with ffprobe</summary>
<pre><code class="language-sh">$ just analyze C:\\Development\\modding-cyberpunk\\4ddicted\\archive\\source\\archive\\base\\localization\\common\\vo\\civ_mid_m_85_mex_30_mt_vista_del_rey_f_1ed3f72f92559000.wem

ffprobe -i 'C:\Development\modding-cyberpunk\4ddicted\archive\source\archive\base\localization\common\vo\civ_mid_m_85_mex_30_mt_vista_del_rey_f_1ed3f72f92559000.wem' -show_format

ffprobe version 6.0-essentials_build-www.gyan.dev Copyright (c) 2007-2023 the FFmpeg developers
  built with gcc 12.2.0 (Rev10, Built by MSYS2 project)
  configuration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-lzma --enable-zlib --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-sdl2 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-libaom --enable-libopenjpeg --enable-libvpx --enable-libass --enable-libfreetype --enable-libfribidi --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-ffnvcodec --enable-nvdec --enable-nvenc --enable-d3d11va --enable-dxva2 --enable-libmfx --enable-libgme --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libtheora --enable-libvo-amrwbenc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-librubberband
  libavutil      58.  2.100 / 58.  2.100
  libavcodec     60.  3.100 / 60.  3.100
  libavformat    60.  3.100 / 60.  3.100
  libavdevice    60.  1.100 / 60.  1.100
  libavfilter     9.  3.100 /  9.  3.100
  libswscale      7.  1.100 /  7.  1.100
  libswresample   4. 10.100 /  4. 10.100
  libpostproc    57.  1.100 / 57.  1.100

[wav @ 0000023cb642ebc0] Estimating duration from bitrate, this may be inaccurate
[wav @ 0000023cb642ebc0] Could not find codec parameters for stream 0 (Audio: none ([255][255][0][0] / 0xFFFF), 48000 Hz, 
1 channels, 103 kb/s): unknown codec
Consider increasing the value for the 'analyzeduration' (0) and 'probesize' (5000000) options
Input #0, wav, from 'C:\Development\modding-cyberpunk\4ddicted\archive\source\archive\base\localization\common\vo\civ_mid_m_85_mex_30_mt_vista_del_rey_f_1ed3f72f92559000.wem':
  Duration: 00:00:05.94, bitrate: 103 kb/s
  Stream #0:0: Audio: none ([255][255][0][0] / 0xFFFF), 48000 Hz, 1 channels, 103 kb/s
Unsupported codec with id 0 for input stream 0
[FORMAT]
filename=C:\Development\modding-cyberpunk\4ddicted\archive\source\archive\base\localization\common\vo\civ_mid_m_85_mex_30_mt_vista_del_rey_f_1ed3f72f92559000.wem
nb_streams=1
nb_programs=0
format_name=wav
format_long_name=WAV / WAVE (Waveform Audio)
start_time=N/A
duration=5.937938
size=76925
bit_rate=103638
probe_score=99
[/FORMAT]
</code></pre>
</details>
</div>
</div>
<h3 id="validation"><a class="header" href="#validation">Validation</a></h3>
<p>What is worth mentioning is that Audioware will actually validate <em>many properties</em> of your audios on game startup, here's a <em>non-exhaustive</em> list.</p>
<div id="admonition-validation-errors" class="admonition admonish-info" role="note" aria-labelledby="admonition-validation-errors-title">
<div class="admonition-title">
<div id="admonition-validation-errors-title">
<p>Validation error(s)</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-validation-errors"></a>
</div>
<div>
<p>In any case error(s) <em>will never</em> crash your game, Audioware will instead ignore the invalid entries and report them both in the logs at <code>red4ext\logs\audioware-xyz.log</code> and in <a href="https://wiki.redmodding.org/cyber-engine-tweaks/console/console">CET Game Log</a>.</p>
</div>
</div>
<div id="admonition-ids-must-be-uniques" class="admonition admonish-danger" role="note" aria-labelledby="admonition-ids-must-be-uniques-title">
<div class="admonition-title">
<div id="admonition-ids-must-be-uniques-title">
<p>IDs must be uniques</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-ids-must-be-uniques"></a>
</div>
<div>
<p>each audio ID (e.g. <code>my_custom_audio</code>) is automatically added to game's <a href="https://jekky.dev/red4ext-rs/red4ext_rs/types/struct.CNamePool.html">CName pool</a> on startup, so make sure they are <em>truly</em> uniques (across all game and all mods).</p>
</div>
</div>
<div id="admonition-files-must-be-located-inside-depot" class="admonition admonish-warning" role="note" aria-labelledby="admonition-files-must-be-located-inside-depot-title">
<div class="admonition-title">
<div id="admonition-files-must-be-located-inside-depot-title">
<p>Files must be located inside depot</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-files-must-be-located-inside-depot"></a>
</div>
<div>
<p>Audio files can be defined at your convenience at the root of your mod folder inside its depot, or any sub-folder, but they <strong>cannot</strong> be located outside.</p>
</div>
</div>
<div id="admonition-files-must-be-valid" class="admonition admonish-warning" role="note" aria-labelledby="admonition-files-must-be-valid-title">
<div class="admonition-title">
<div id="admonition-files-must-be-valid-title">
<p>Files must be valid</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-files-must-be-valid"></a>
</div>
<div>
<p>Each audio file is briefly preloaded on game startup to make sure they will play just fine during your game session.</p>
</div>
</div>
<div id="admonition-audio-settings-must-be-valid" class="admonition admonish-warning" role="note" aria-labelledby="admonition-audio-settings-must-be-valid-title">
<div class="admonition-title">
<div id="admonition-audio-settings-must-be-valid-title">
<p>Audio settings must be valid</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-audio-settings-must-be-valid"></a>
</div>
<div>
<p>Each setting defined alongside audios must be valid.</p>
<blockquote>
<p>e.g. specifying a <code>start_position</code> further than audio total duration is <strong>not</strong>!</p>
</blockquote>
</div>
</div>
<div id="admonition-validation-deep-dive" class="admonition admonish-tip" role="note" aria-labelledby="admonition-validation-deep-dive-title">
<div class="admonition-title">
<div id="admonition-validation-deep-dive-title">
<p>Validation deep-dive</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-validation-deep-dive"></a>
</div>
<div>
<p>If you would like to know exactly how validation works, consider browsing <a href="https://github.com/cyb3rpsych0s1s/audioware/tree/main/manifest/src/de">unit-tests files</a>.</p>
</div>
</div>
<h3 id="guarantees"><a class="header" href="#guarantees">Guarantees</a></h3>
<p>The reason behind these numerous validation checks: it then allows Audioware to make <span style="color: #f3d772">assumptions</span> about your sounds bank.</p>
<div id="admonition-guarantees" class="admonition admonish-info" role="note" aria-labelledby="admonition-guarantees-title">
<div class="admonition-title">
<div id="admonition-guarantees-title">
<p>Guarantees</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-guarantees"></a>
</div>
<div>
<p>Upholding these invariants <span style="color: hotpink">guarantees</span> for example that any <code>audio ID</code> that makes it into Audioware both <span style="color: hotpink">exists</span> and can be <span style="color: hotpink">safely loaded</span> without further need for runtime validation, <span style="color: hotpink">increasing overall in-game performances!</span></p>
</div>
</div>
<div id="admonition-dont-be-that-person" class="admonition admonish-danger" role="note" aria-labelledby="admonition-dont-be-that-person-title">
<div class="admonition-title">
<div id="admonition-dont-be-that-person-title">
<p>Don't be THAT person!</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-dont-be-that-person"></a>
</div>
<div>
<p>Of course if you delete audio file(s) while your game is running, Audioware will <strong>crash</strong> as soon as called with e.g. <code>Play</code>. This is <strong>expected</strong>.</p>
<p><span style="font-size: 0.85em">Let's be pragmatic 1sec: if you do so, you probably <em>deserve</em> your game to crash anyway üòÇ</span></p>
</div>
</div>
<div id="admonition-hot-reloading" class="admonition admonish-warning" role="note" aria-labelledby="admonition-hot-reloading-title">
<div class="admonition-title">
<div id="admonition-hot-reloading-title">
<p>Hot-reloading</p>
</div>
<a class="admonition-anchor-link" href="MANIFEST.html#admonition-hot-reloading"></a>
</div>
<div>
<p>Since <code>1.3.0</code>, there's a <a href="https://github.com/cyb3rpsych0s1s/audioware/releases/latest">secret <code>DEV_ONLY</code> build</a> available on Github which allows to hot-reload while developping your mod. It's a "best effort" attempt and will work for most replacement(s), but it does not handle all possible edge-cases, so accept that it might crash every once in a while if you make really wide change(s). Also, be prepared to be spammed with logs.</p>
<blockquote>
<p>üí° To get you going fast during mod development, you can also rely on <a href="./AUDIO_SETTINGS_EXT.html">AudioSettingsExt</a> instead to adjust audio effects until you get them to your liking, then write them down in your <a href="./MANIFEST.html">Manifest</a>.</p>
</blockquote>
</div>
</div>
<div class="footnote-definition" id="YAML"><sup class="footnote-definition-label">1</sup>
<p>YAML is a file format, see <a href="https://circleci.com/blog/what-is-yaml-a-beginner-s-guide/">how to write your own</a>.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sections"><a class="header" href="#sections">Sections</a></h1>
<p>Manifest can contain any of the following sections.</p>
<p>Sections provide "good defaults", a way to classify your audio assets, and even more.</p>
<h2 id="sfx"><a class="header" href="#sfx">SFX</a></h2>
<p><code>sfx</code> is used to define simple sounds.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_sfx: ./somewhere/sfx.ogg
</code></pre>
</div>
<div class="table-wrapper"><table><thead><tr><th>Default</th><th></th><th>Editable?</th></tr></thead><tbody>
<tr><td>usage</td><td><code>in-memory</code></td><td>‚úÖ</td></tr>
<tr><td>volume settings</td><td><code>SfxVolume</code></td><td>‚õî</td></tr>
</tbody></table>
</div>
<h2 id="onos"><a class="header" href="#onos">Onos</a></h2>
<p><code>onos</code> (<em>onomatopeia</em>) is used to define audio with 2 files each, one per gender.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_ono:
    fem: ./somewhere/ono.wav
    male: ./somewhere/else/ono.wav
</code></pre>
</div>
<div class="table-wrapper"><table><thead><tr><th>Default</th><th></th><th>Editable?</th></tr></thead><tbody>
<tr><td>usage</td><td><code>in-memory</code></td><td>‚úÖ</td></tr>
<tr><td>volume settings</td><td><code>DialogueVolume</code></td><td>‚õî</td></tr>
</tbody></table>
</div><div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-info"></a>
</div>
<div>
<p>Useful for audio that do not require any subtitle, but still have a notion of gender.</p>
<blockquote>
<p>e.g. goons grunts and other onos.</p>
</blockquote>
</div>
</div>
<h2 id="voices"><a class="header" href="#voices">Voices</a></h2>
<p><code>voices</code> (sometimes called <em>voiceovers</em>) is used to define audio with multiple files each<br />
and optional subtitles.</p>
<div class="table-wrapper"><table><thead><tr><th>Default</th><th></th><th>Editable?</th></tr></thead><tbody>
<tr><td>usage</td><td><code>on-demand</code></td><td>‚úÖ</td></tr>
<tr><td>volume settings</td><td><code>DialogueVolume</code></td><td>‚õî</td></tr>
</tbody></table>
</div>
<h3 id="simple-voice"><a class="header" href="#simple-voice">Simple Voice</a></h3>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_simple_voice:
  en-us: ./some/voice.wav
</code></pre>
</div>
<div id="admonition-info-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-1-title">
<div class="admonition-title">
<div id="admonition-info-1-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-info-1"></a>
</div>
<div>
<p>Useful for audio that have to be translated into multiple languages, but for which the notion of gender does not matter.</p>
<blockquote>
<p>e.g. a vending machine promotional speech</p>
</blockquote>
</div>
</div>
<h4 id="simple-voice-with-subtitle"><a class="header" href="#simple-voice-with-subtitle">Simple Voice with subtitle</a></h4>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_simple_voice:
  en-us: ./some/voice.wav
  subtitle: "hello world"
</code></pre>
</div>
<div id="admonition-info-2" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-2-title">
<div class="admonition-title">
<div id="admonition-info-2-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-info-2"></a>
</div>
<div>
<p>Useful to add simple subtitle to be played along your audio.</p>
<blockquote>
<p>e.g. NPC dialogues or chatters.</p>
</blockquote>
</div>
</div>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-tip"></a>
</div>
<div>
<p>Defining subtitle will <em>automatically</em> register them with <a href="https://github.com/psiberx/cp2077-codeware/wiki#localization">Codeware Localization</a> and play them alongside audio, for the proper gender and locale(s).</p>
</div>
</div>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-warning"></a>
</div>
<div>
<p>There is no fallback locale. Audio will not play for other locales other than the ones explicity specified.</p>
</div>
</div>
<h3 id="plural-voice"><a class="header" href="#plural-voice">Plural Voice</a></h3>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">version: 1.0.0
voices:
  my_plural_voice:
    en-us:
      fem: ./fem_intro.mp3
      male: ./male_intro.mp3
      subtitle: "Let me introduce myself, I'm V."
  my_other_plural_voice:
    en-us:
      fem:
        file: ./fem_wake_up.mp3
        subtitle: "Looks yourself in the mirror, girl."
      male:
        file: ./male_wake_up.mp3
        subtitle: "Look yourself in the mirror, dude."
</code></pre>
</div>
<div id="admonition-info-3" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-3-title">
<div class="admonition-title">
<div id="admonition-info-3-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SECTIONS.html#admonition-info-3"></a>
</div>
<div>
<p>Useful for dialogues that are both locale-based <em>and</em> gender-based, with subtitle.</p>
<blockquote>
<p>e.g. V's dialogues.</p>
</blockquote>
</div>
</div>
<h2 id="music"><a class="header" href="#music">Music</a></h2>
<p><code>music</code> defines songs and ambience music.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">version: 1.0.0
music:
  gorillaz_feel_good_inc: ./feel-good-inc.mp3
</code></pre>
</div>
<div class="table-wrapper"><table><thead><tr><th>Default</th><th></th><th>Editable?</th></tr></thead><tbody>
<tr><td>usage</td><td><code>streaming</code></td><td>‚úÖ</td></tr>
<tr><td>volume settings</td><td><code>MusicVolume</code></td><td>‚õî</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="settings"><a class="header" href="#settings">Settings</a></h1>
<p>Any sound will accept the following settings.</p>
<h2 id="-usage"><a class="header" href="#-usage">üóÉÔ∏è Usage</a></h2>
<p>This allows to specify how audio will be handled in memory.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  usage: on-demand
</code></pre>
</div>
<p>Each section already has its own default usage when left unspecified, see <a href="./SECTIONS.html">Sections</a>.</p>
<p>You can choose between possible values: <code>on-demand</code>, <code>in-memory</code> and <code>streaming</code>.</p>
<div id="admonition-extra-flexibility" class="admonition admonish-bulb" role="note" aria-labelledby="admonition-extra-flexibility-title">
<div class="admonition-title">
<div id="admonition-extra-flexibility-title">
<p>Extra flexibility</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-extra-flexibility"></a>
</div>
<div>
<p>This gives you extra flexibility if e.g. you want to play a song which is traditionally defined in <a href="./SECTIONS.html#music">music</a> as a <a href="./SECTIONS.html#onos">ono</a> instead (which by default is loaded <code>in-memory</code>) while still being able to play it with <code>streaming</code>.</p>
</div>
</div>
<h3 id="in-memory"><a class="header" href="#in-memory">in-memory</a></h3>
<p>The audio is loaded <em>all-at-once</em> in-memory on game startup and kept around for the <em>whole duration</em> of the game session.</p>
<div id="admonition-best-used-for" class="admonition admonish-info" role="note" aria-labelledby="admonition-best-used-for-title">
<div class="admonition-title">
<div id="admonition-best-used-for-title">
<p>Best used for</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-best-used-for"></a>
</div>
<div>
<p><span style="color: #f3d772">Short</span> sounds that are meant to be played <span style="color: #f3d772">frequently</span>.</p>
</div>
</div>
<h3 id="on-demand"><a class="header" href="#on-demand">on-demand</a></h3>
<p>The audio is loaded <em>all-at-once</em> each time on-demand, and never kept around.</p>
<div id="admonition-best-used-for-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-best-used-for-1-title">
<div class="admonition-title">
<div id="admonition-best-used-for-1-title">
<p>Best used for</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-best-used-for-1"></a>
</div>
<div>
<p><span style="color: #f3d772">Short</span> sounds that <em>you don't want to permanently allocate memory for</em>,<br />
or that are <span style="color: #f3d772">not</span> meant to be played <span style="color: #f3d772">frequently</span>.</p>
</div>
</div>
<h3 id="streaming"><a class="header" href="#streaming">streaming</a></h3>
<p>The audio is streamed on-demand.</p>
<div id="admonition-best-used-for-2" class="admonition admonish-info" role="note" aria-labelledby="admonition-best-used-for-2-title">
<div class="admonition-title">
<div id="admonition-best-used-for-2-title">
<p>Best used for</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-best-used-for-2"></a>
</div>
<div>
<p><span style="color: #f3d772">Long-lasting</span> sounds that should not be loaded all-at-once in-memory and only <span style="color: #f3d772">streamed</span> <em>on-demand</em>.</p>
</div>
</div>
<h2 id="-volume"><a class="header" href="#-volume">üîâ Volume</a></h2>
<p>You can set <code>Volume</code> factor as follow:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    volume: 2.0 # 2 times louder !
my_other_audio:
  file: ./somewhere/else/audio.ogg
  settings:
    volume: 0.5 # 2 times softer
</code></pre>
</div>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-info"></a>
</div>
<div>
<p>No matter how high <code>Volume</code> is set, it will not play louder than 85dB.</p>
</div>
</div>
<h2 id="-start-time"><a class="header" href="#-start-time">üïü Start time</a></h2>
<p>This will play your audio with a delay.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    start_time: 10s # 10 seconds delay
</code></pre>
</div>
<h2 id="-start-position"><a class="header" href="#-start-position">üîö Start position</a></h2>
<p>This will play your audio further from start.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    start_position: 1s # start playing directly at 1s
</code></pre>
</div>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-warning"></a>
</div>
<div>
<p>Note that digits with decimal(s) are not supported, so if you would like to start the audio at e.g. <code>1.2s</code>, please specify <code>120ms</code> instead.</p>
</div>
</div>
<h2 id="-region"><a class="header" href="#-region">üçï Region</a></h2>
<p>This will only play the specified region of audio.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    region:
      starts: 120ms # starts directly from 1.2s
      ends: 8s # ends at 8s
</code></pre>
</div>
<div id="admonition-hint" class="admonition admonish-tip" role="note" aria-labelledby="admonition-hint-title">
<div class="admonition-title">
<div id="admonition-hint-title">
<p>Hint</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-hint"></a>
</div>
<div>
<p>You're not required to specify both <code>starts</code> and <code>ends</code>.</p>
<p>If left unspecified:</p>
<ul>
<li><code>starts</code> will start at the beginning of the audio.</li>
<li><code>ends</code> will play until the end of the audio.</li>
</ul>
<blockquote>
<p>Also kindly note that entire piece of audio still need to be loaded, in terms of memory, regardless its region.</p>
</blockquote>
</div>
</div>
<h2 id="-loop"><a class="header" href="#-loop">üîÅ Loop</a></h2>
<p>This will loop audio until explicitly stopped.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    loop: true
</code></pre>
</div>
<h2 id="-playback-rate"><a class="header" href="#-playback-rate">‚è© Playback rate</a></h2>
<p>This will play your audio faster, or slower.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    playback_rate: x0.5 # plays twice as slow
</code></pre>
</div>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    playback_rate: x2 # plays twice as fast
</code></pre>
</div>
<p>You can also specify the value in semitones as follow.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    playback_rate: 2‚ôØ # adjusts by 2 semitones
</code></pre>
</div>
<h2 id="-panning"><a class="header" href="#-panning">‚ÜîÔ∏è Panning</a></h2>
<p>This adjust from where the audio originates from, from left to right.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    panning: 0.0 # plays fully on left side
</code></pre>
</div>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    panning: 1.0 # plays fully on right side
</code></pre>
</div>
<div id="admonition-warning-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-1-title">
<div class="admonition-title">
<div id="admonition-warning-1-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-warning-1"></a>
</div>
<div>
<p>The value <strong>must</strong> be between <code>0.0</code> and <code>1.0</code> (inclusive).</p>
</div>
</div>
<h2 id="-fade-in-tween"><a class="header" href="#-fade-in-tween">‚§¥Ô∏è Fade-in tween</a></h2>
<p>This will play your audio gradually fading-in.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    fade_in_tween:
      start_time: 1s # starts playing directly from 1s
      duration: 3s # fade-in duration
      Linear: # linear fade-in curve (no value needed)
</code></pre>
</div>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml">my_custom_audio:
  file: ./somewhere/audio.wav
  settings:
    fade_in_tween:
      start_time: 1s # starts playing directly from 1s
      duration: 3s # fade-in duration
      InPowi: 3 # easing-in with power 3
</code></pre>
</div>
<p>Possible values for <code>easing</code> can be found <a href="https://docs.rs/kira/latest/kira/tween/enum.Easing.html">here</a>.</p>
<div id="admonition-hint-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-hint-1-title">
<div class="admonition-title">
<div id="admonition-hint-1-title">
<p>Hint</p>
</div>
<a class="admonition-anchor-link" href="SETTINGS.html#admonition-hint-1"></a>
</div>
<div>
<p>Note that fade-out can be specified as a parameter when calling methods like <code>Stop</code>, <code>Switch</code>, etc. see <a href="./AUDIO_SETTINGS_EXT.html">AudioSettingsExt</a>.</p>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="routing"><a class="header" href="#routing">Routing</a></h1>
<p>Each section in the manifest will be routed to different tracks internally.</p>
<p>This is important because each track will come with different behavior.</p>
<h2 id="volume-settings"><a class="header" href="#volume-settings">Volume settings</a></h2>
<p>Depending on which section audio is defined, it will be affected by a specific game volume setting.</p>
<div id="admonition-cyberpunk-volume-settings" class="admonition admonish-gear" role="note" aria-labelledby="admonition-cyberpunk-volume-settings-title">
<div class="admonition-title">
<div id="admonition-cyberpunk-volume-settings-title">
<p>Cyberpunk volume settings</p>
</div>
<a class="admonition-anchor-link" href="ROUTING.html#admonition-cyberpunk-volume-settings"></a>
</div>
<div>
<p><img src="./assets/settings.png" alt="Cyberpunk volume settings" /></p>
<div class="table-wrapper"><table><thead><tr><th>track</th><th>volume</th></tr></thead><tbody>
<tr><td>sfx</td><td>SfxVolume</td></tr>
<tr><td>onos</td><td>DialogueVolume</td></tr>
<tr><td>voices</td><td>DialogueVolume</td></tr>
<tr><td>music</td><td>MusicVolume</td></tr>
</tbody></table>
</div>
<p>All audio are always affected by <code>MasterVolume</code>, as expected.</p>
</div>
</div>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="ROUTING.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/eE5jRxl8HAY?si=KBzA9kfuWZMKwx-r" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<p>Likewise each track will be affected, or not, by <a href="./PARAMETERS.html#preset">preset</a> and <a href="./PARAMETERS.html#reverb-mix">reverb mix</a>.</p>
<div class="table-wrapper"><table><thead><tr><th>track</th><th>preset</th><th>reverb</th></tr></thead><tbody>
<tr><td>sfx</td><td>‚úÖ</td><td>‚úÖ</td></tr>
<tr><td>onos</td><td>‚úÖ</td><td>‚úÖ</td></tr>
<tr><td>voices</td><td>‚úÖ</td><td>‚úÖ</td></tr>
<tr><td>music</td><td>‚ùå</td><td>‚ùå</td></tr>
</tbody></table>
</div>
<h2 id="going-further"><a class="header" href="#going-further">Going further</a></h2>
<p>This might sounds restrictive at first, but it's actually a way to provide good defaults while being easily worked-around when needed.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="ROUTING.html#admonition-tip"></a>
</div>
<div>
<p>Imagine you want to play a song affected by <a href="./PARAMETERS.html#preset">underwater preset</a> when V dives underwater.</p>
<p>Even if you'd usually go for <a href="./SECTIONS.html#music">music</a> section,<br />
nothing prevents from defining your audio in <a href="./SECTIONS.html#sfx">sfx</a> instead with <em>streaming</em> <a href="./SETTINGS.html#usage">usage</a> for example.</p>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="api"><a class="header" href="#api">API</a></h1>
<p>Audioware's API integrates seamlessly with Cyberpunk AudioSystem,
but it offers more.</p>
<p>To start using it right away, continue to the <a href="./GUIDE.html">Developper Guide</a>.</p>
<p>If you need a deeper understanding on how it's built, <a href="./DOCS.html">Internal docs</a> are available.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="developer-guide"><a class="header" href="#developer-guide">Developer guide</a></h1>
<p>The simplest way to get going uses Cyberpunk 2077's native game system called <a href="./AUDIO_SYSTEM.html">AudioSystem</a>, as you normally would with <em>vanilla</em><sup class="footnote-reference"><a href="#1">1</a></sup> sounds.</p>
<p>When you start requiring a little bit more control, or want to add-in some audio effects, it's usually time to reach for <a href="./AUDIO_SETTINGS_EXT.html">AudioSystemExt</a> and <a href="./AUDIO_SETTINGS_EXT.html">AudioSettingsExt</a>.</p>
<p>And you can also modify <a href="./PARAMETERS.html">Global Parameters</a> at anytime during the game session.</p>
<p>Last but not least, your sounds can be played on audio emitter(s) thanks to <a href="./SPATIALIZATION.html">Spatialization</a>.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p><em>vanilla</em> describes everything originally belonging to the game, as opposed to further modifications or <em>mods</em> made by the community.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="audiosystem"><a class="header" href="#audiosystem">AudioSystem</a></h1>
<p>Once defined, each <a href="./MANIFEST.html#anatomy">audio ID</a> is automatically registered on startup,
making it available for scripting in-game.</p>
<p>If you simply want to play any custom sound, you can use <a href="https://nativedb.red4ext.com/AudioSystem">AudioSystem</a> as you normally would for vanilla sounds.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">GameInstance.GetAudioSystem(game).Play(n"my_custom_audio");
</code></pre>
</div>
<p>It also accepts any of the usual parameters that <code>AudioSystem</code>'s methods support.</p>
<p>Currently all these methods are supported:</p>
<ul>
<li><a href="https://nativedb.red4ext.com/gameGameAudioSystem#Play">Play</a></li>
<li><a href="https://nativedb.red4ext.com/gameGameAudioSystem#Stop">Stop</a></li>
<li><a href="https://nativedb.red4ext.com/gameGameAudioSystem#Switch">Switch</a></li>
<li><a href="https://nativedb.red4ext.com/gameGameAudioSystem#Parameter">Parameter</a>: see <a href="./PARAMETERS.html">Parameters</a></li>
</ul>
<div id="admonition-breaking-changes-in-130" class="admonition admonish-warning" role="note" aria-labelledby="admonition-breaking-changes-in-130-title">
<div class="admonition-title">
<div id="admonition-breaking-changes-in-130-title">
<p>Breaking changes in 1.3.0+</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SYSTEM.html#admonition-breaking-changes-in-130"></a>
</div>
<div>
<p>Support for <a href="https://nativedb.red4ext.com/gameGameAudioSystem#PlayOnEmitter">PlayOnEmitter</a> since there's no way to associate a <code>tag_name</code> when called from vanilla.</p>
<p>Likewise, the methods above can only be used to play sounds on tracks, not on spatial emitters.</p>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="audiosystemext"><a class="header" href="#audiosystemext">AudioSystemExt</a></h1>
<p><a href="https://github.com/cyb3rpsych0s1s/audioware/blob/main/audioware/reds/Ext.reds">AudioSystemExt</a> is an enhanced system over Cyberpunk's <a href="https://nativedb.red4ext.com/AudioSystem">AudioSystem</a>.</p>
<p>This system exposes both <em>the exact same API</em> as its counterpart, but <em>also</em> similar methods with <em>additional</em> parameters.</p>
<p>For example, if you want your audio to fade-in linearly during 5secs:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">import Audioware.LinearTween

//                                      ‚¨áÔ∏è notice 'Ext' extension here
let system = GameInstance.GetAudioSystemExt(game);
let v = GetPlayer(game).GetEntityID();

// play audio                            ‚¨áÔ∏è with 5s linear fade-in
system.Play(n"my_custom_audio", v, n"V", LinearTween.Immediate(5.));

// later on, stop audio                  ‚¨áÔ∏è with 2s linear fade-out
system.Stop(n"my_custom_audio", v, n"V", LinearTween.Immediate(2.));
</code></pre>
</div>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SYSTEM_EXT.html#admonition-warning"></a>
</div>
<div>
<p>Note that any of these additional parameters <span style="color: #f3d772">only</span> work with audio defined in Audioware.</p>
<blockquote>
<p>e.g. you cannot use a fade-in tween with <em>non-reexported</em> vanilla audio, see below.</p>
</blockquote>
</div>
</div>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SYSTEM_EXT.html#admonition-tip"></a>
</div>
<div>
<p>If you want to use vanilla audio with Audioware, you can still convert + export them from WolvenKit as described <a href="https://wiki.redmodding.org/wolvenkit/wolvenkit-app/usage/video-and-audio#audio">in their Wiki</a>, then re-define them normally in your <a href="./MANIFEST.html">manifest</a>.</p>
<blockquote>
<p>‚ö†Ô∏è make sure to use a <a href="./MANIFEST.html#supported-audio-formats">supported audio format</a></p>
</blockquote>
</div>
</div>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SYSTEM_EXT.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/yUAQ5id3ZA0?si=yf8TKX2TPtd64uaV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="going-further-1"><a class="header" href="#going-further-1">Going further</a></h2>
<p>Combined with <a href="https://github.com/psiberx/cp2077-codeware">Codeware</a>, you can e.g. quickly create atmosphere like so:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let weather = GameInstance.GetWeatherSystem(game);
weather.SetWeather(n"24h_weather_rain", 20.0, 9u);
GameInstance.GetAudioSystemExt(game).Play(n"milles_feuilles");
</code></pre>
</div>
<div id="admonition-youtube-demo-1" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-1-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-1-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SYSTEM_EXT.html#admonition-youtube-demo-1"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/Vlk0Ve8j4ck?si=xX0WaPwi-fzH3TxW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="audiosettingsext"><a class="header" href="#audiosettingsext">AudioSettingsExt</a></h1>
<p>Earlier we saw that <a href="./SETTINGS.html">settings</a> can be defined in <a href="./MANIFEST.html">manifest</a>,
but these settings can also be specified in scripts:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let ext = new AudioSettingsExt();
ext.fadeIn = LinearTween.Immediate(2.0);

GameInstance
.GetAudioSystemExt(game)
.Play(n"still_dre", GetPlayer(game).GetEntityID(), n"V", scnDialogLineType.Regular, settings);
</code></pre>
</div>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="AUDIO_SETTINGS_EXT.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/1JWgtmSyGg8?si=-t9C7K4KkJuySHpW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="dynamic-sound-events"><a class="header" href="#dynamic-sound-events">Dynamic sound events</a></h1>
<p>Starting from <code>1.7.0</code>, Audioware exposes a new API to control sounds <em>while they play</em>.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">public class MySystem extends ScriptableSystem {
    private let sound: ref&lt;DynamicSoundEvent&gt;;
    private final func OnPlayerAttach(request: ref&lt;PlayerAttachRequest&gt;) -&gt; Void {
        let player = owner as PlayerPuppet;
        if IsDefined(player)
        &amp;&amp; !IsDefined(this.sound) {
            this.sound = DynamicSoundEvent.Create(n"PUT_YOUR_SOUND_NAME_HERE");
            // enqueue and play sound
            player.QueueEvent(this.sound);
        }
    }
    // then, at a later point
    public func UpdateVolume() {
        if IsDefined(this.sound) {
            // e.g. increase volume
            this.sound.SetVolume(1.2);
        }
    }
    private func OnDetach() -&gt; Void {
        if IsDefined(this.sound) {
            this.sound = null;
        }
    }
}
</code></pre>
</div>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="DYNAMIC_SOUNDS.html#admonition-tip"></a>
</div>
<div>
<p>Note that once a dynamic sound event has effectively been stopped, it cannot be restarted or further controlled.</p>
</div>
</div>
<h2 id="going-further-2"><a class="header" href="#going-further-2">Going further</a></h2>
<p>Coupled with <a href="./NATIVE_INTEGRATION.html">Native integration</a> feature, here's how you can for example change the audio when the player is chased by NCPD based on the wanted level:</p>
<ul>
<li>first instrumental slowly fades-in after 2 stars</li>
<li>then it gets replaced by a more "punchy" variant instrumental with scratches after 3 stars</li>
<li>plus some slight contextual volume variations (player running, crouching, etc).</li>
</ul>
<p>You can find the example in <code>ChangeCombatMusic.reds</code>.</p>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="DYNAMIC_SOUNDS.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/PH53zc11r6c?si=w0-nb_IWAnkl2Uvq" title="Add heat-stage based music" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h1>
<p>Audioware exposes the following parameters.</p>
<h2 id="reverb-mix"><a class="header" href="#reverb-mix">Reverb Mix</a></h2>
<p>Allows to alter reverb like e.g. when in a cavern.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let value: Float; // reverb can be between 0.0 and 1.0 (inclusive)
GameInstance.GetBlackboardSystem(game)
    .Get(GetAllBlackboardDefs().Audioware_Settings)
    .SetFloat(GetAllBlackboardDefs().Audioware_Settings.ReverbMix, value, true);
</code></pre>
</div>
<div id="admonition-routing" class="admonition admonish-info" role="note" aria-labelledby="admonition-routing-title">
<div class="admonition-title">
<div id="admonition-routing-title">
<p>Routing</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-routing"></a>
</div>
<div>
<p>This preset only affects audio played on <code>sfx</code>, <code>onos</code> and <code>voices</code>.</p>
</div>
</div>
<div id="admonition-important" class="admonition admonish-warning" role="note" aria-labelledby="admonition-important-title">
<div class="admonition-title">
<div id="admonition-important-title">
<p>Important</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-important"></a>
</div>
<div>
<p>Keep it mind that forgetting to reset reverb to normal once finished will annoy players.</p>
<p>For this very reason, reverb is <span style="color: #f3d772">automatically reset</span> on each save load.</p>
</div>
</div>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/oxZ1hjodSDA?si=mxYtDAWgBKa9sZa8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="preset"><a class="header" href="#preset">Preset</a></h2>
<p>Allows to alter frequencies like e.g. underwater or on the phone.</p>
<div id="admonition-integration" class="admonition admonish-info" role="note" aria-labelledby="admonition-integration-title">
<div class="admonition-title">
<div id="admonition-integration-title">
<p>Integration</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-integration"></a>
</div>
<div>
<p>Whenever V dives into water this preset will be automatically set to <code>Preset.Underwater</code>, and switched back to <code>Preset.None</code> whenever V eventually reaches the surface.</p>
</div>
</div>
<p>You can also set it manually, if needed:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let value: Preset; // possible values: None, Underwater, OnThePhone
GameInstance.GetBlackboardSystem(game)
    .Get(GetAllBlackboardDefs().Audioware_Settings)
    .SetInt(GetAllBlackboardDefs().Audioware_Settings.AudioPreset, value, true);
</code></pre>
</div>
<div id="admonition-routing-1" class="admonition admonish-info" role="note" aria-labelledby="admonition-routing-1-title">
<div class="admonition-title">
<div id="admonition-routing-1-title">
<p>Routing</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-routing-1"></a>
</div>
<div>
<p>This preset only affects audio played on <code>sfx</code>, <code>onos</code> and <code>voices</code>.</p>
</div>
</div>
<div id="admonition-important-1" class="admonition admonish-warning" role="note" aria-labelledby="admonition-important-1-title">
<div class="admonition-title">
<div id="admonition-important-1-title">
<p>Important</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-important-1"></a>
</div>
<div>
<p>Forgetting to reset preset to <code>Preset.None</code> once finished will ruin players immersion.</p>
<p>For this very reason, preset is <span style="color: #f3d772">automatically reset</span> on each save load.</p>
</div>
</div>
<div id="admonition-youtube-demo-1" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-1-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-1-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="PARAMETERS.html#admonition-youtube-demo-1"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/CPQ2s2q-TCc?si=Lvh8kH6FFcc55wQ3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="spatialization"><a class="header" href="#spatialization">Spatialization</a></h1>
<p>Thanks to <a href="https://docs.rs/kira/latest/kira/spatial/index.html" title="kira spatial scene">kira</a> Audioware supports audio spatialization, which means audio <em>that moves along its emitter</em>, getting louder when closer and softer when further, along with left-right <a href="https://en.wikipedia.org/wiki/Panning_(audio)">panning</a>.</p>
<h2 id="registration"><a class="header" href="#registration">Registration</a></h2>
<p>Audio emitter(s) must be registered before you can emit audio from them, but they are automatically cleaned up whenever emitter despawns or dies.
You must provide a <code>tag_name</code> which Audioware uses to track emitters internally.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">GameInstance.GetAudioSystemExt(game).RegisterEmitter(emitterID, n"MyMod");
</code></pre>
</div>
<div id="admonition-lifecycle" class="admonition admonish-warning" role="note" aria-labelledby="admonition-lifecycle-title">
<div class="admonition-title">
<div id="admonition-lifecycle-title">
<p>Lifecycle</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-lifecycle"></a>
</div>
<div>
<p>When registering spatial emitters with Codeware, use <code>n"Entity/AfterAttach"</code> instead of <a href="https://github.com/psiberx/cp2077-codeware/blob/5e3b71757d6633d30363de0e0bb570a72df33f18/src/App/Callback/Controllers/EntityAttachHook.hpp#L18">deprecated <code>n"Entity/Attached"</code></a> which can cause issues with Audioware.</p>
</div>
</div>
<div id="admonition-types" class="admonition admonish-warning" role="note" aria-labelledby="admonition-types-title">
<div class="admonition-title">
<div id="admonition-types-title">
<p>Types</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-types"></a>
</div>
<div>
<p>Audio emitter have to be positioned so they can only be <a href="https://nativedb.red4ext.com/Entity">Entity</a> or classes inheriting from it like <a href="https://nativedb.red4ext.com/GameObject">GameObject</a>, devices, vehicles, NPCs, etc.</p>
</div>
</div>
<div id="admonition-cleanup" class="admonition admonish-tip" role="note" aria-labelledby="admonition-cleanup-title">
<div class="admonition-title">
<div id="admonition-cleanup-title">
<p>Cleanup</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-cleanup"></a>
</div>
<div>
<p>You don't need to manually unregister your audio emitter(s), even if you can do so:<br />
Audioware does it automatically whenever emitter despawns or dies. Dying emitter <span style="color: hotpink">still</span> emit.</p>
</div>
</div>
<div id="admonition-dying-emitter-130" class="admonition admonish-tip" role="note" aria-labelledby="admonition-dying-emitter-130-title">
<div class="admonition-title">
<div id="admonition-dying-emitter-130-title">
<p>Dying emitter (1.3.0+)</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-dying-emitter-130"></a>
</div>
<div>
<p>You don't need to manually fade out or stop your audio on dying emitter(s), even if you can do so: Audioware does it automatically whenever emitter dies (stop) or gets incapacitated / defeated (fade-out).</p>
</div>
</div>
<div id="admonition-hint" class="admonition admonish-tip" role="note" aria-labelledby="admonition-hint-title">
<div class="admonition-title">
<div id="admonition-hint-title">
<p>Hint</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-hint"></a>
</div>
<div>
<p>V cannot be an audio emitter because (s)he is the listener.</p>
</div>
</div>
<h2 id="usage-1"><a class="header" href="#usage-1">Usage</a></h2>
<p>Then, simply use the <code>OnEmitter</code> variants of the methods:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">// ‚ö†Ô∏è emitterID and emitterCName must be both valid and non-default
GameInstance.GetAudioSystemExt(game).PlayOnEmitter(n"my_custom_audio", emitterID, n"MyMod");

// if should stop at some point...
GameInstance.GetAudioSystemExt(game).StopOnEmitter(n"my_custom_audio", emitterID, n"MyMod");
</code></pre>
</div>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/GZWnAjhhFOQ?si=BRe8h-x7A5SZUO2X" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="auto-registration"><a class="header" href="#auto-registration">Auto-registration</a></h2>
<p>Whenever you want to turn all particular entities of a kind into audio emitters automatically, you can reach out for <a href="https://github.com/psiberx/cp2077-codeware/wiki#game-events">Codeware game events</a>.</p>
<p>Here's a dummy example on how to use <code>F1</code> to register any audio emitter in crosshair.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">import Audioware.*

public class AutoEmittersSystem extends ScriptableSystem {
    private func OnAttach() {
        GameInstance.GetCallbackSystem().RegisterCallback(n"Input/Key", this, n"OnKeyInput")
        // listen to F1 being pressed or released
        .AddTarget(InputTarget.Key(EInputKey.IK_F1));
    }
    private cb func OnKeyInput(evt: ref&lt;KeyInputEvent&gt;) {
        // when F1 is released
        if NotEquals(evt.GetAction(), EInputAction.IACT_Release) { return; }
        // some songs defined in manifest
        let sounds = [ 
            n"my_custom_song_01",
            n"my_custom_song_02", 
            n"my_custom_song_03",
            n"my_custom_song_04", 
            n"my_custom_song_05"
        ];
        // get a random sound above
        let eventName = sounds[RandRange(0, ArraySize(sounds) -1)];
        // prepare some settings
        let tween = new LinearTween();
        tween.startTime = RandRangeF(1.0, 3.0);
        tween.duration = RandRangeF(3.0, 4.5);
        let emitterID: EntityID;
        let tagName: CName = n"MyMod";

        let game = this.GetGameInstance();
        // get entity V currently looks at (crosshair)
        let target = GameInstance.GetTargetingSystem(game).GetLookAtObject(GetPlayer(game));
        if !IsDefined(target) { return; }
        emitterID = target.GetEntityID();
        if !GameInstance.GetAudioSystemExt(game).IsRegisteredEmitter(emitterID, tagName) {
            GameInstance.GetAudioSystemExt(game).RegisterEmitter(emitterID, tagName);
        }
        GameInstance.GetAudioSystemExt(game).PlayOnEmitter(eventName, emitterID, tagName);
    }
}
</code></pre>
</div>
<div id="admonition-youtube-demo-1" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-1-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-1-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-youtube-demo-1"></a>
</div>
<div>
<p>This particular showcase is a smoke test: applying most CPU-intensive sounds (music streaming) to multiple entities in the vicinity and triggering auto-unregistration.</p>
<p>It aims at demonstrating that both performances stay correct (even on my low-end laptop!),<br />
and unregistration happens seamlessly (including during simultaneous kills).</p>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/cngYFyFaapo?si=q1I_8g7t5A0d6uGs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="integration"><a class="header" href="#integration">Integration</a></h2>
<p>Since version <code>1.4.1+</code> audio emitters are now affected by <a href="./PARAMETERS.html#reverb-mix">reverb mix</a>,
and optionally by <a href="./PARAMETERS.html#preset">environmental preset</a>.</p>
<p>These can be opted-in/out by defining on <code>EmitterSettings</code>:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let settings = new EmitterSettings();
settings.affectedByReverbMix = false;
settings.affectedByEnvironmentalPreset = false;
</code></pre>
</div>
<div id="admonition-youtube-demo-2" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-2-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-2-title">
<p>Youtube demo</p>
</div>
<a class="admonition-anchor-link" href="SPATIALIZATION.html#admonition-youtube-demo-2"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/EDbfk1vfur8?si=gf208qokzHpTyL-s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="dynamic-emitter-events"><a class="header" href="#dynamic-emitter-events">Dynamic emitter events</a></h1>
<p>Starting from <code>1.7.6</code>, Audioware exposes a new API to control spatial emitter sounds <em>while they play</em>.</p>
<h2 id="usage-2"><a class="header" href="#usage-2">Usage</a></h2>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">public class MySystem extends ScriptableSystem {
    private let sound: ref&lt;DynamicEmitterEvent&gt;;
    private func OnLookAt() -&gt; Void {
        let game = this.GetGameInstance();
        let target = GameInstance.GetTargetingSystem(game).GetLookAtObject(GetPlayer(game));
        let id = target.GetEntityID();
        
        if IsDefined(target)
        &amp;&amp; !IsDefined(this.sound)
        // don't forget to register your emitter first
        &amp;&amp; GameInstance.GetAudioSystemExt(game).RegisterEmitter(id, n"PUT_YOUR_MOD_TAG_NAME_HERE") {
            this.sound = DynamicEmitterEvent.Create(n"PUT_YOUR_SOUND_NAME_HERE", n"PUT_YOUR_MOD_TAG_NAME_HERE");
            // enqueue and play sound
            target.QueueEvent(this.sound);
        }
    }
    // then, at a later point
    public func UpdateVolume() {
        if IsDefined(this.sound) {
            // e.g. increase volume
            this.sound.SetVolume(1.2);
        }
    }
    private func OnDetach() -&gt; Void {
        if IsDefined(this.sound) {
            this.sound = null;
        }
    }
}
</code></pre>
</div>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="DYNAMIC_EMITTERS.html#admonition-tip"></a>
</div>
<div>
<p>Note that once a dynamic emitter event has effectively been stopped, it cannot be restarted or further controlled.</p>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="scene-dialog-lines"><a class="header" href="#scene-dialog-lines">Scene dialog lines</a></h1>
<p>Audioware allows to use custom audio in Quest Scenes dialog lines, which can be freely mixed with vanilla ones.</p>
<h2 id="preambule"><a class="header" href="#preambule">Preambule</a></h2>
<p>A scene a.k.a <a href="https://nativedb.red4ext.com/scnSceneResource">scnSceneResource</a> contains multiple nodes a.k.a <a href="https://nativedb.red4ext.com/scnSectionNode">scnSectionNode</a> chained together to create for example a dialogue between V and NPCs, gestures, animation or effect sequences.</p>
<p>Thanks to WolvenKit Editor you can already visualize Quests, including their Phases and Scenes.</p>
<p>Scene Section node can contain single dialog line event a.k.a <a href="https://nativedb.red4ext.com/scnDialogLineEvent">scnDialogLineEvent</a>.</p>
<p><img src="./SCENE_DIALOG_LINES/assets/chaining-scene-dialog-line-events-across-multiple-nodes.png" alt="multiple nodes, single event" /></p>
<p>But a single Scene Section node can also contain multiple successive dialog line events.</p>
<p><img src="./SCENE_DIALOG_LINES/assets/chaining-scene-dialog-line-events-in-single-node.png" alt="single node, multiple events" /></p>
<p>This concept applies for discussions over the holocall, during braindances, yet using different scene nodes that won't be covered here.</p>
<h2 id="creating-a-dialogue"><a class="header" href="#creating-a-dialogue">Creating a dialogue</a></h2>
<p>This documentation won't go over the basics of <code>.quest</code>, <code>.questphase</code> and <code>.scene</code> as <a href="https://wiki.redmodding.org/cyberpunk-2077-modding/modding-guides/quest">REDmodding Wiki already does</a>.</p>
<p>Aside from nodes, a dialog line itself requires roughly 4 components:</p>
<ol>
<li>actors</li>
<li>audio asset(s) for the voice</li>
<li>subtitle(s) to display on-screen</li>
<li>lipsync animation(s) to be performed by the actor</li>
</ol>
<div id="admonition-info" class="admonition admonish-info" role="note" aria-labelledby="admonition-info-title">
<div class="admonition-title">
<div id="admonition-info-title">
<p>Info</p>
</div>
<a class="admonition-anchor-link" href="SCENE_DIALOG_LINES.html#admonition-info"></a>
</div>
<div>
<p>Implementing the first 3 ones is relatively easy while lipsync requires additional consideration, as developed below.</p>
</div>
</div>
<p>Consider first that, for most of the dialog lines in the game, you probably don't need any lipsync.</p>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="SCENE_DIALOG_LINES.html#admonition-tip"></a>
</div>
<div>
<p>If you think about it one second, most of V's dialogues are made in first-person perspective (fpp).</p>
<p>So unless V stands nearby a reflecting surface, a mirror, or sits inside a car (where third-person perspective or tpp, can be activated) you probably don't need to worry about lipsync.</p>
<p>It's gonna be the same for a large portion of NPCs such as: devices, drones, droids, cyborgs and mechs do not have lips.</p>
<p>Scavs with digital masks, humanoids with clothing or cyberware covering their lips also fall into this category.</p>
</div>
</div>
<p>Since the topic is hairy, a <a href="https://github.com/cyb3rpsych0s1s/audioware/tree/main/examples/scenes">sample example .scene is provided in the repo</a>,
on which the following documentation is directly based so that you can follow along,
a courtesy of <a href="https://github.com/MrBilL61">MrBill</a>.</p>
<h2 id="actor"><a class="header" href="#actor">Actor</a></h2>
<p>In order to voice a dialogue you must first define the actors.</p>
<p>At a minimum, there's a <code>speaker</code> (the one who talks), and an <code>addressee</code> (the one being talked to).</p>
<p>The <a href="https://nativedb.red4ext.com/scnSceneResource#actors">actors</a> field in the <a href="https://nativedb.red4ext.com/scnSceneResource">scnSceneResource</a> defines all the actor(s), except for the player's actor(s).</p>
<p><img src="./SCENE_DIALOG_LINES/assets/actors.png" alt="non-player actors" /></p>
<p>The player's actor(s) can be found under <a href="https://nativedb.red4ext.com/scnSceneResource#playerActors">playerActors</a>.</p>
<p><img src="./SCENE_DIALOG_LINES/assets/player-actors.png" alt="player actors" /></p>
<h2 id="voice"><a class="header" href="#voice">Voice</a></h2>
<p>For example, here's how adding a custom dialog line audio for Panam in Audioware looks like:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml"># resources\r6\audioware\dialogtest\dialogs.yaml
version: 1.0.0
dialogs:
  13159259729229609924:
    en-us: ./en-us/vo/panam_f_b69f1500c3d57bc4.Mp3
</code></pre>
</div>
<p>In this snippet the RUID <code>13159259729229609924</code> is actually the hash of the hexadecimal <code>b69f1500c3d57bc4</code>. It is used to establish a relationship between resources. This is how the RED engine knows which subtitle to pick for a given voice, which lipsync anim to play, etc.</p>
<div id="admonition-tip-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-1-title">
<div class="admonition-title">
<div id="admonition-tip-1-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="SCENE_DIALOG_LINES.html#admonition-tip-1"></a>
</div>
<div>
<p>In the RED engine, the same naming convention is usually observed for audio assets:</p>
<p><code>{actor}_{f,m,i}_{hex}.wem</code> e.g. <code>panam_f_b69f1500c3d57bc4.wem</code></p>
<blockquote>
<p>where <code>f</code> stands for <code>female</code>, <code>m</code> for <code>male</code> and <code>i</code> when the notion of gender is irrelevant.</p>
</blockquote>
</div>
</div>
<p>The file path at the bottom indicates to Audioware where to load the audio asset from for a specific language, here <code>en-us</code>:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/audio-asset-filepath.png" alt="audio asset file path" /></p>
<h2 id="subtitle"><a class="header" href="#subtitle">Subtitle</a></h2>
<p>Audioware does not handle the subtitles for this feature, because RED engine already perfectly does.</p>
<h3 id="subtitles-entries"><a class="header" href="#subtitles-entries">subtitles entries</a></h3>
<p>First, add subtitle entries:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/subtitle-entries.png" alt="subtitles entries" /></p>
<p>Here you can notice the <code>stringId</code> <code>13159259729229609924</code> is the same as the one defined for the <a href="SCENE_DIALOG_LINES.html#voice">Voice</a>.</p>
<p>Each entry is an (optionally genderized) subtitle for a given localization string ID (a.k.a <code>locStringId</code> or simply <code>stringId</code>).</p>
<h3 id="subtitles-map"><a class="header" href="#subtitles-map">subtitles map</a></h3>
<p>Then map the subtitles:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/subtitle-map.png" alt="subtitles map" /></p>
<p>It links the actual subtitles file to a subtitles group.</p>
<h3 id="subtitles-localization"><a class="header" href="#subtitles-localization">subtitles localization</a></h3>
<p>Finally, don't forget to register the subtitles map in the <code>.xl</code> manifest:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml"># resources\audiowaredialogtest.archive.xl
# ...
localization:
  # ...
  subtitles:
    en-us: mod\audiowaredialogtest\localization\en-us\subtitles\dialogtest_subtitlemap.json
</code></pre>
</div>
<p>It links to the map for a given language.</p>
<h2 id="lipsync"><a class="header" href="#lipsync">Lipsync</a></h2>
<p>At the time of writing, creating custom lipsync animation is not possible yet.</p>
<p>That being said, you can apply the trick that the movie industry has been using for over 50 years already when dubbing movies in foreign languages: find a lipsync animation that roughly matches both the duration and flow of the speech, and uses it.</p>
<p>It's not perfect, but when carefully picked it usually does the trick.</p>
<div id="admonition-tip-2" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-2-title">
<div class="admonition-title">
<div id="admonition-tip-2-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="SCENE_DIALOG_LINES.html#admonition-tip-2"></a>
</div>
<div>
<p>You will usually be tempted to create a custom audio for your sentence first, then search for the <a href="https://sounddb.redmodding.org/subtitles">corresponding lipsync animations in SoundDB</a>.</p>
<p>Although it might seem counter-intuitive at first, the reverse workflow generally yields a better outcome: find some interesting sentence which roughly match what you want your character to say, and then generate the closest possible sentence to match the lipsync!</p>
</div>
</div>
<h3 id="lipsync-animation"><a class="header" href="#lipsync-animation">lipsync animation</a></h3>
<p>First define the <code>.anims</code>:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/anims.png" alt="lipsync anims" /></p>
<p>It contains raw lipsync animation and the rig for the 3D model.</p>
<h3 id="lipsync-map"><a class="header" href="#lipsync-map">lipsync map</a></h3>
<p>Then, define the <code>.lipmap</code>:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/lipmap.png" alt="lipsync map" /></p>
<p>It links the actors by their voice tag to the lipsync animation and a scene for a given language.</p>
<p>Scene path is defined by its FNV1A64 Hash. Hash for the scene can be generated by WolvenKit <code>Hash Tool</code></p>
<h3 id="lipsync-map-localization"><a class="header" href="#lipsync-map-localization">lipsync map localization</a></h3>
<p>Don't forget to register the <code>.lipmap</code> in the <code>.xl</code> manifest:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml"># resources\audiowaredialogtest.archive.xl
# ...
localization:
  # ...
  lipmaps:
    en-us: mod\audiowaredialogtest\localization\en-us\lipsync\dialogtest.lipmap
</code></pre>
</div>
<h3 id="voiceover-map"><a class="header" href="#voiceover-map">voiceover map</a></h3>
<p>By default the RED engine won't play lipsync at all if there's no associated <code>.wem</code>(s).</p>
<p>This is what you can define here:</p>
<p><img src="./SCENE_DIALOG_LINES/assets/voiceovermap.png" alt="voiceover map" /></p>
<p>It links the localization string ID to the audio asset for each gender.</p>
<h3 id="silent-wem"><a class="header" href="#silent-wem">silent .wem</a></h3>
<p>Another peculiarity of the RED engine is that it will start playing a lipsync anim as long as a <code>.wem</code> exits, but if its duration does not match with lipsync anim it will abruptly stop playing it before reaching its end.</p>
<p>This is why, at the time of writing, creating silent <code>.wem</code> with matching duration is a necessary evil.</p>
<p>The most common way to do it is with Wwise.</p>
<h4 id="install-wwise"><a class="header" href="#install-wwise">install Wwise</a></h4>
<p>Go to their <a href="https://www.audiokinetic.com/en/download/">download section</a>, you will also need to create an account.</p>
<h4 id="create-new-project"><a class="header" href="#create-new-project">create new project</a></h4>
<p>You need to create a project to handle the conversion between <code>.wav</code> to <code>.wem</code>.</p>
<p>You can use the default suggested settings, but don't forget to specify the <code>Conversion Settings</code> to <code>Vorbis Quality High</code>.</p>
<p><img src="./SCENE_DIALOG_LINES/assets/wwise-project-settings.png" alt="project conversion settings" /></p>
<h4 id="convert-silent-audio"><a class="header" href="#convert-silent-audio">convert silent audio</a></h4>
<p>Let's imagine you need a 8s long silent <code>.wem</code> as a placeholder for your lipsync anim.</p>
<ol>
<li>create an empty <code>Sound SFX Container</code> under the <code>Default Work Unit</code> in <code>Actor-Mixer Hierarchy</code>.
<img src="./SCENE_DIALOG_LINES/assets/wwise-create-sound-sfx-container.png" alt="create sound sfx container" /></li>
<li>rename the container to e.g. <code>8000ms</code></li>
<li>import a silent <code>.wav</code>: for convenience you can find a <a href="https://github.com/cyb3rpsych0s1s/audioware/blob/main/silence1h.wav">1h-long .wav in the repo</a>, a courtesy of <a href="https://next.nexusmods.com/profile/DBK01">DBK</a>, that you can simply trim to the appropriate duration.
<img src="./SCENE_DIALOG_LINES/assets/wwise-import-audio.png" alt="import audio" /></li>
<li>don't forget to use <code>Sound SFX</code>
<img src="./SCENE_DIALOG_LINES/assets/wwise-import-settings.png" alt="use sound sfx" /></li>
<li>if you need to do multiple silent <code>.wem</code> of different durations, it is fine to reuse the same asset.
<img src="./SCENE_DIALOG_LINES/assets/wwise-import-reuse.png" alt="reuse audio on import" /></li>
<li>then trim the audio, e.g. to <code>8</code> seconds.
<img src="./SCENE_DIALOG_LINES/assets/wwise-trim-audio.png" alt="trim audio" /></li>
<li>before converting, make sure the <code>Conversion Settings</code> for the container is set to <code>Vorbis Quality High</code>
<img src="./SCENE_DIALOG_LINES/assets/wwise-conversion-settings.png" alt="container conversion settings" /></li>
<li>convert the trimmed <code>.wav</code> to <code>.wem</code>
<img src="./SCENE_DIALOG_LINES/assets/wwise-convert-audio.png" alt="convert audio" /></li>
<li>copy the converted <code>.wem</code> from Wwise cache (<code>.cache</code> folder by default). Each asset is identified by its hexadecimal, so it's important to select the appropriate one, usually the latest.
<img src="./SCENE_DIALOG_LINES/assets/wwise-grab-cache.png" alt="pick wem file" /></li>
<li>finally paste it in your WolvenKit <code>archive</code>.</li>
</ol>
<h3 id="voiceover-map-localization"><a class="header" href="#voiceover-map-localization">voiceover map localization</a></h3>
<p>Don't forget to register the <code>.json</code> in the <code>.xl</code> manifest:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://github.com/psiberx/cp2077-tweak-xl/wiki/YAML-Tweaks"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-file"></i>&nbsp;&nbsp;YAML</a>  
<pre><code class="language-yml"># resources\audiowaredialogtest.archive.xl
# ...
localization:
  # ...
  vomaps:
    en-us: mod\audiowaredialogtest\localization\en-us\vo\voiceovermap.json
</code></pre>
</div>
<h3 id="string-id-variants-map"><a class="header" href="#string-id-variants-map">string id variants map</a></h3>
<p>Last but not least, there's an additional file which contains the duration (or length) of the string IDs.
If you browse vanilla files, you can find it under e.g. <code>base\localization\en-us\stringidvariantlengthsreport.json</code>.</p>
<p>At the time of writing ArchiveXL does not support creating custom ones just yet,
so here's how you can do with Codeware instead:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">class ATStringidVariantLengthsReportService extends ScriptableService {
  private cb func OnLoad() {
    GameInstance
      .GetCallbackSystem()
      .RegisterCallback(n"Resource/PostLoad", this, n"OnPostLoad")
      .AddTarget(
        ResourceTarget.Path(r"base\\localization\\en-us\\stringidvariantlengthsreport.json")
      );
  }

  private cb func OnPostLoad(event: ref&lt;ResourceEvent&gt;) {
    let resource: ref&lt;JsonResource&gt; = event.GetResource() as JsonResource;
    let map: ref&lt;locVoiceoverLengthMap&gt; = resource.root as locVoiceoverLengthMap;

    let panamline1: locVoLengthEntry;
    panamline1.stringId = HashToCRUID(13159259729229609924ul);
    panamline1.femaleLength = 4.9;
    panamline1.maleLength = 4.9;

    ArrayPush(map.entries, panamline1);
  }
}
</code></pre>
</div>
<h2 id="showcase"><a class="header" href="#showcase">Showcase</a></h2>
<p>And here's the result, thanks to <a href="https://github.com/MrBilL61">MrBill</a> for the <code>.scene</code> comparing:</p>
<div class="table-wrapper"><table><thead><tr><th>sentence</th><th>audio</th><th>lipsync</th></tr></thead><tbody>
<tr><td>vanilla</td><td>vanilla wem</td><td>vanilla</td></tr>
<tr><td>vanilla</td><td>audioware mp3</td><td>vanilla</td></tr>
<tr><td>modded</td><td>audioware mp3</td><td>vanilla</td></tr>
</tbody></table>
</div><div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="SCENE_DIALOG_LINES.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/8ZxQGmgXOUQ?si=3jz8anszKNfp3P7z" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Ok, this was a mouthful!</p>
<p>Here's a quick schema summarizing the resources and their dependencies.</p>
<p><img src="./SCENE_DIALOG_LINES/assets/resources.png" alt="scene resources" /></p>
<p>Big tokens of appreciation to <a href="https://next.nexusmods.com/profile/MisterChedda">MisterChedda</a>, <a href="https://github.com/MrBilL61">MrBill</a>, <a href="https://next.nexusmods.com/profile/DBK01">DBK</a> and <a href="https://next.nexusmods.com/profile/dederara">Dedra</a> without whom this feature would probably have never been finished!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="native-sounds-integration"><a class="header" href="#native-sounds-integration">Native sounds integration</a></h1>
<p>Starting from <code>1.6.0</code>, Audioware allows to listen and/or mute <em>any</em> vanilla audio event <em>at runtime</em>.</p>
<p>As a matter of fact, this means you can also <em>replace</em> any vanilla audio, including <em>temporarily</em>.</p>
<p>This also means you can find informations about any event, including the ones that lack some on <a href="https://sounddb.redmodding.org/">SoundDB</a>.</p>
<h2 id="native-audio-events-callback-system"><a class="header" href="#native-audio-events-callback-system">Native audio events callback system</a></h2>
<p>Its callback system, albeit more simplistic, is very similar to <a href="https://github.com/psiberx/cp2077-codeware/wiki#reference">Codeware's CallbackSystem</a>, so you can feel at home.</p>
<p>Both <code>RegisterCallback</code> and <code>RegisterStaticCallback</code> first parameter is the audio event <code>name</code>, which can be found in scripts, assets, or even conveniently <a href="https://sounddb.redmodding.org/">SoundDB</a>.</p>
<h3 id="register-callbacks"><a class="header" href="#register-callbacks">Register callbacks</a></h3>
<p>Let's take for examples <code>game_occlusion</code> and <a href="https://sounddb.redmodding.org/events/Mixing_Output_Cinema">Mixing_Output_Cinema</a>.</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">class MyService extends ScriptableService {
  private cb func OnLoad() {
    let system = new AudioEventCallbackSystem();
    // listen to any 'game_occlusion' audio events
    system.RegisterCallback(n"game_occlusion", this, n"OnOcclusion");
    // listen only to 'Mixing_Output_Cinema' audio events of type 'Play'
    system
        .RegisterCallback(n"Mixing_Output_Cinema", this, n"OnMixingOutput")
        .AddTarget(EventTarget.ActionType(audioEventActionType.Play));
  }

  private cb func OnOcclusion(event: ref&lt;SoundEvent&gt;) {
    FTLog("occlusion changed!");
  }

  private cb func OnMixingOutput(event: ref&lt;PlayEvent&gt;) {
    FTLog("play mixing output!");
  }
}
</code></pre>
</div>
<div id="admonition-difference-with-codeware-callback-system" class="admonition admonish-tip" role="note" aria-labelledby="admonition-difference-with-codeware-callback-system-title">
<div class="admonition-title">
<div id="admonition-difference-with-codeware-callback-system-title">
<p>Difference with Codeware callback system</p>
</div>
<a class="admonition-anchor-link" href="NATIVE_INTEGRATION.html#admonition-difference-with-codeware-callback-system"></a>
</div>
<div>
<p>As with Codeware's, it can register callbacks to class member or static methods, filter targets to be notified about and define whether callback are automatically unregistered when a game session (by default), or persist for as long as the game runs. Audioware just does not expose additional options like <code>CallbackRunMode</code> yet.</p>
</div>
</div>
<div id="admonition-additional-considerations" class="admonition admonish-info" role="note" aria-labelledby="admonition-additional-considerations-title">
<div class="admonition-title">
<div id="admonition-additional-considerations-title">
<p>Additional considerations</p>
</div>
<a class="admonition-anchor-link" href="NATIVE_INTEGRATION.html#admonition-additional-considerations"></a>
</div>
<div>
<p>No matter their initial type and origin, the final audio event types <em>roughly</em> match <a href="https://nativedb.red4ext.com/audioEventActionType">audioEventActionType enum</a>, but here's the twist: when the game dispatches events, they are not played directly as-is.</p>
<p>They are enqueued first, then depending on many factors happening in-game (distance from the player, velocity, number of concurrent sounds already being played, etc) they can be played, rescheduled or simply cancelled. Their fields can also change all throughout processing until final play.</p>
<ul>
<li>it's worth noting that <code>Play</code> and <code>PlayAnimation</code> events are ultimately either played from memory (a.k.a <code>play</code> from the sound engine's perspective) or from an external file (a.k.a <code>play_external</code>).</li>
<li>another type of play event exist in the sound engine but not in scripting APIs: <code>PlayOneShot</code> for short "fire and forget" sounds like weapon firing for example.</li>
<li>likewise, there's both <code>SetParameter</code> and <code>SetGlobalParameter</code> events, even if <code>SetGlobalParameter</code> is not a variant of <code>audioEventActionType</code> enum.</li>
</ul>
</div>
</div>
<p>For this reason, Audioware exposes an additional <code>enum</code> which reflects its implementation in the sound engine: <code>EventHookType</code>, which can be used when registering callbacks:</p>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let system = new AudioEventCallbackSystem();
// listen to 'game_window_in_focus' global parameter event
system
    .RegisterCallback(n"game_window_in_focus", this, n"OnWindowsInFocus")
    .AddTarget(EventTarget.HookType(EventHookType.SetGlobalParameter));
</code></pre>
</div>
<div id="admonition-conversion-between-eventhooktype-and-audioeventactiontype" class="admonition admonish-info" role="note" aria-labelledby="admonition-conversion-between-eventhooktype-and-audioeventactiontype-title">
<div class="admonition-title">
<div id="admonition-conversion-between-eventhooktype-and-audioeventactiontype-title">
<p>Conversion between EventHookType and audioEventActionType</p>
</div>
<a class="admonition-anchor-link" href="NATIVE_INTEGRATION.html#admonition-conversion-between-eventhooktype-and-audioeventactiontype"></a>
</div>
<div>
<p>Audioware conversion from <code>audioEventActionType</code> to <code>EventHookType</code> is "best effort" only.</p>
</div>
</div>
<h2 id="mute-native-audio-events"><a class="header" href="#mute-native-audio-events">Mute native audio events</a></h2>
<p>Audioware also allows to mute any native audio event.</p>
<p>Note that muted audio events <em>can still be listened to</em>.</p>
<p>For example, to completely mute Cyberpunk's intro we need:</p>
<ul>
<li><a href="https://sounddb.redmodding.org/events/cp_bumpers_temp_sfx_music_start">cp_bumpers_temp_sfx_music_start</a></li>
<li><a href="https://sounddb.redmodding.org/events/cp_intro_temp_sfx_music_start">cp_intro_temp_sfx_music_start</a></li>
<li>and <a href="https://sounddb.redmodding.org/events/cp_intro_temp_sfx_music_stop">cp_intro_temp_sfx_music_stop</a>.</li>
</ul>
<div class='codeblocks'>
<a style="font-size:12px;text-decoration:none;--fa-primary-color:tomato;color:tomato;" href="https://wiki.redmodding.org/redscript"><i style="font-size:18px;--fa-primary-color:tomato;color:tomato;" class="fa fa-solid fa-r"></i>&nbsp;&nbsp;Redscript</a>  
<pre><code class="language-swift">let manager = new AudioEventManager();
// mute 'cp_bumpers_temp_sfx_music_start' of any type
manager.Mute(n"cp_bumpers_temp_sfx_music_start");
// mute 'cp_intro_temp_sfx_music_start' of type 'Play'
manager.MuteSpecific(n"cp_intro_temp_sfx_music_start", audioEventActionType.Play);
// mute 'cp_intro_temp_sfx_music_stop' of type 'StopSound'
manager.MuteSpecific(n"cp_intro_temp_sfx_music_stop", audioEventActionType.StopSound);
</code></pre>
</div>
<div id="admonition-a-note-of-caution" class="admonition admonish-danger" role="note" aria-labelledby="admonition-a-note-of-caution-title">
<div class="admonition-title">
<div id="admonition-a-note-of-caution-title">
<p>A note of caution</p>
</div>
<a class="admonition-anchor-link" href="NATIVE_INTEGRATION.html#admonition-a-note-of-caution"></a>
</div>
<div>
<p>Muting some audio events <em>can utterly break the game</em>, at least temporarily: it will get back to normal the next time you run the game without the mutes.</p>
<p>The most disruptive audio events are <code>SetSwitch</code>, <code>SetParameter</code> and <code>SetGlobalParameter</code>. For example, muting <code>SetSwitch</code> with <code>vo</code> audio event name will prevent dialogues audio from playing at all (but not their subtitles).</p>
<p>So experiment freely, but be careful with what you release!</p>
</div>
</div>
<h2 id="going-further-3"><a class="header" href="#going-further-3">Going further</a></h2>
<p>Here's a quick demo showing how to replace Cyberpunk intro music with a different song.</p>
<p>You can find the example's code in <code>ChangeIntro.reds</code>.</p>
<div id="admonition-youtube-demo" class="admonition admonish-youtube" role="note" aria-labelledby="admonition-youtube-demo-title">
<div class="admonition-title">
<div id="admonition-youtube-demo-title">
<p>YouTube demo</p>
</div>
<a class="admonition-anchor-link" href="NATIVE_INTEGRATION.html#admonition-youtube-demo"></a>
</div>
<div>
<iframe width="100%" height="420" src="https://www.youtube.com/embed/0ixsBFC8Znw?si=2JF2hDpJVaUy5v0n" title="Change intro music" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="docs"><a class="header" href="#docs">Docs</a></h1>
<p>The traditional Rust docs can be found <a href="docs/doc/audioware/index.html">here</a>ü¶Ä, but they are still being written and rather incomplete at the moment.</p>
<p>It merely contains implementation details, so if you're more interested in using Audioware right away please head back to the <a href="./GUIDE.html">Developer Guide</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="integration-1"><a class="header" href="#integration-1">Integration</a></h1>
<p><em>How well engine matches our expectations when it comes to integrate seamlessly</em> with Cyberpunk 2077.</p>
<p>Let's review what you get for free.</p>
<h2 id="-game-volume-settings"><a class="header" href="#-game-volume-settings">üîâ Game volume settings</a></h2>
<p>We've already seen that custom audio are affected by player's <a href="./ROUTING.html#volume-settings">game volume settings</a>.</p>
<h2 id="-dynamic-pauseresume-when-in-menus"><a class="header" href="#-dynamic-pauseresume-when-in-menus">‚èØÔ∏è Dynamic pause/resume when in menus</a></h2>
<p>All audios will be properly paused when entering any menu,<br />
and resumed when back in-game.</p>
<div id="admonition-resuming-fading-out-sounds" class="admonition admonish-warning" role="note" aria-labelledby="admonition-resuming-fading-out-sounds-title">
<div class="admonition-title">
<div id="admonition-resuming-fading-out-sounds-title">
<p>Resuming fading-out sounds</p>
</div>
<a class="admonition-anchor-link" href="INTEGRATION.html#admonition-resuming-fading-out-sounds"></a>
</div>
<div>
<p>Because the <code>resume</code> function in the engine simply resume any non-stopped sound,<br />
sound(s) that were currently stopping with a fading-out will be <em>entirely</em> resumed,<br />
not resuming their fading out as you could expect.</p>
<p>Providing this feature out-of-the-box requires keeping track of more state,
so it is not currently implemented.</p>
</div>
</div>
<div id="admonition-but-you-can-still-do-it-anyway" class="admonition admonish-note" role="note" aria-labelledby="admonition-but-you-can-still-do-it-anyway-title">
<div class="admonition-title">
<div id="admonition-but-you-can-still-do-it-anyway-title">
<p>But you can still do it anyway</p>
</div>
<a class="admonition-anchor-link" href="INTEGRATION.html#admonition-but-you-can-still-do-it-anyway"></a>
</div>
<div>
<p>Remember that nothing prevents you to use <a href="./AUDIO_SYSTEM.html">AudioSystem</a> / <a href="./AUDIO_SYSTEM_EXT.html">AudioSystemExt</a> <em>while</em> in menu, so you can work around this limitation and implement your own logic there.</p>
</div>
</div>
<h2 id="-dynamic-underwater-preset"><a class="header" href="#-dynamic-underwater-preset">üèä‚Äç‚ôÇÔ∏è Dynamic underwater preset</a></h2>
<p>As previously stated, audio will dynamically have its frequencies adjusted by <a href="./PARAMETERS.html#preset">Underwater preset</a> whenever V enter or exit water, for the tracks where it makes sense.</p>
<p>This is currently not implemented for cars.</p>
<h2 id="-dynamic-time-dilation"><a class="header" href="#-dynamic-time-dilation">üèä‚Äç‚ôÇÔ∏è Dynamic time dilation</a></h2>
<p>Since <code>1.3.0</code>, audio will dynamically have its pitch adjusted whenever time dilation changes (e.g. when using Sandevistan).</p>
<p>You can also opt-out on a per-sound basis.</p>
<h2 id="-clean-game-sessions"><a class="header" href="#-clean-game-sessions">üßπ Clean game sessions</a></h2>
<p>Spatial scene along with its emitters, every track and currently playing sounds will be completely stopped and reset on every save load.</p>
<p>You don't need to worry about memory leaks.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
